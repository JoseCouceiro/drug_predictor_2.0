raw_csv_files:
  type: PartitionedDataSet
  path: data/01_raw/csv_files
  filename_suffix: ".csv"
  dataset:
    type: pandas.CSVDataSet

featurized_data:
  type: PartitionedDataSet
  path: data/05_model_input/featurized_data
  dataset:
    type: pandas.ParquetDataSet
    filepath: dummy.parquet

# ================================
# Lipinski model outputs
# ================================

# Trained Keras model
lipinski_model:
  type: pickle.PickleDataSet
  filepath: data/06_models/lipinski_model.pkl
  backend: pickle

# Training history (includes training & validation metrics per epoch)
lipinski_training_history:
  type: json.JSONDataSet
  filepath: data/08_reporting/lipinski_training_history.json

# Predictions on the training/test set
lipinski_train_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/lipinski_train_predictions.csv

# Classification report on the training/test set
lipinski_train_report:
  type: text.TextDataSet
  filepath: data/08_reporting/lipinski_train_report.txt

# Predictions on the validation set
lipinski_val_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/lipinski_val_predictions.csv

# Classification report on the validation set
lipinski_val_report:
  type: text.TextDataSet
  filepath: data/08_reporting/lipinski_val_report.txt

# ================================
# Multitask model outputs
# ================================

# Trained multitask model
multitask_model:
  type: pickle.PickleDataSet
  filepath: data/06_models/multitask_model.pkl
  backend: pickle

# Training history (JSON)
multitask_training_history:
  type: json.JSONDataSet
  filepath: data/08_reporting/multitask_training_history.json

# Training set predictions
multitask_train_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/multitask_train_predictions.csv

# Validation set predictions
multitask_val_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/multitask_val_predictions.csv

# Classification reports
multitask_train_drug_report:
  type: text.TextDataSet
  filepath: data/08_reporting/multitask_train_drug_report.txt

multitask_train_atc_report:
  type: text.TextDataSet
  filepath: data/08_reporting/multitask_train_atc_report.txt

multitask_val_drug_report:
  type: text.TextDataSet
  filepath: data/08_reporting/multitask_val_drug_report.txt

multitask_val_atc_report:
  type: text.TextDataSet
  filepath: data/08_reporting/multitask_val_atc_report.txt

# ================================
# Hierarchical Classification: Filtered Datasets (Drugs Only for ATC)
# ================================

X_train_drugs_only:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_train_drugs_only.pkl

X_val_drugs_only:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_val_drugs_only.pkl

y_atc_train_drugs_only:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_atc_train_drugs_only.pkl

y_atc_val_drugs_only:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_atc_val_drugs_only.pkl

n_atc_classes_drugs_only:
  type: yaml.YAMLDataSet
  filepath: data/05_model_input/n_atc_classes_drugs_only.yml

# ================================
# Drug Binary Classifier (Model 1)
# ================================

drug_classifier_model:
  type: pickle.PickleDataSet
  filepath: data/06_models/drug_classifier_model.pkl
  backend: pickle

drug_classifier_history:
  type: json.JSONDataSet
  filepath: data/08_reporting/drug_classifier_history.json

drug_classifier_train_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/drug_classifier_train_predictions.csv

drug_classifier_val_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/drug_classifier_val_predictions.csv

drug_classifier_train_report:
  type: text.TextDataSet
  filepath: data/08_reporting/drug_classifier_train_report.txt

drug_classifier_val_report:
  type: text.TextDataSet
  filepath: data/08_reporting/drug_classifier_val_report.txt

# ================================
# ATC Classifier (Model 2 - Drugs Only)
# ================================

atc_classifier_model:
  type: pickle.PickleDataSet
  filepath: data/06_models/atc_classifier_model.pkl
  backend: pickle

atc_classifier_history:
  type: json.JSONDataSet
  filepath: data/08_reporting/atc_classifier_history.json

atc_classifier_train_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/atc_classifier_train_predictions.csv

atc_classifier_val_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/atc_classifier_val_predictions.csv

atc_classifier_train_report:
  type: text.TextDataSet
  filepath: data/08_reporting/atc_classifier_train_report.txt

atc_classifier_val_report:
  type: text.TextDataSet
  filepath: data/08_reporting/atc_classifier_val_report.txt
# ======================================
# Raw drug dataset
# ======================================
drug_raw:
  type: pandas.CSVDataSet
  filepath: data/01_raw/drugs_dataset/drugs_dataset_final.csv

# ======================================
# Processed outputs
# ======================================

# Outputs from process_drug_data pipeline
atc_mapping:
  type: pandas.CSVDataSet
  filepath: data/05_model_input/atc_mapping.csv

atc_mapping_drugs_only:
  type: pandas.CSVDataSet
  filepath: data/08_reporting/atc_mapping_drugs_only.csv
  
X_train:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_train.pkl

X_val:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/X_val.pkl

y_drug_train:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_drug_train.pkl

y_drug_val:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_drug_val.pkl

y_atc_train:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_atc_train.pkl

y_atc_val:
  type: pickle.PickleDataSet
  filepath: data/05_model_input/y_atc_val.pkl

n_atc_classes:
  type: yaml.YAMLDataSet
  filepath: data/05_model_input/n_atc_classes.yml

# Outputs from multitask_model pipeline
multitask_model:
  type: pickle.PickleDataSet
  filepath: data/06_models/multitask_model.pkl
  backend: pickle

multitask_training_history:
  type: json.JSONDataSet
  filepath: data/08_reporting/multitask_training_history.json

multitask_train_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/multitask_train_predictions.csv

multitask_val_predictions:
  type: pandas.CSVDataSet
  filepath: data/07_model_output/multitask_val_predictions.csv

multitask_train_drug_report:
  type: text.TextDataSet
  filepath: data/08_reporting/multitask_train_drug_report.txt

multitask_train_atc_report:
  type: text.TextDataSet
  filepath: data/08_reporting/multitask_train_atc_report.txt

multitask_val_drug_report:
  type: text.TextDataSet
  filepath: data/08_reporting/multitask_val_drug_report.txt

multitask_val_atc_report:
  type: text.TextDataSet
  filepath: data/08_reporting/multitask_val_atc_report.txt
